#summary How to configure OpenPEX to connect to and control a XenServer 5 cluster.
#labels Phase-Deploy

= Introduction =

This page will tell you how to configure OpenPEX to connect to and control a XenServer 5 cluster.


= Details =

First, checkout the code from the SVN using Netbeans. The recommended Netbeans version is 6.5.1 (with IceFaces 1.8 or greater installed). There are four files you need to edit to allow OpenPEX to connect to the XenServer cluster and the MySQL database. These files are:

  * `pex.properties`
  * `pex.nodes`
  * `Test.java`
  * `TestAPI.java`

For `pex.properties` edit the file so it matches your XenServer and MySQL installation. For xen, you are telling OpenPEX which server is the Pool Master, by giving the root password and the address of that server. You also need to specify the MySQL username and password that was defined in TechnicalRequirements as well as the url of the database running on the gateway:
{{{
xen.username = root
xen.password = XXXXXXX
xen.url = http://XXXX.XXXX.XXXX.XXXX

db.username=XXXXXX
db.password=XXXXXX
db.url=jdbc:mysql://XXXX.XXXX.XXXX.XXXX:3306/pex
}}}

For `pex.nodes` edit the file so it matches your deployment of XenServer worker nodes. An example is given below, please edit it so it matches your own setup:
{{{
leon 128.250.XX.XXX
roy 128.250.XX.XXX
zhora 128.250.XX.XXX
pris 128.250.XX.XXX
deckard 128.250.XX.XXX
}}}

`Test.java` and `TestAPI.java` are simple test cases. If you wish to use them you need to ensure the root and password match that of your XenServer pool master:
{{{
String username = "root";
String password = "XXXXXX";
}}}

Ensure that the glassfishv2 application server is running on your gateway node. To start the glassfishv2 server, you can type in the following command:

{{{
sudo asadmin stop-domain domain1
}}}
